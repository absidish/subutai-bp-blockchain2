<set-title title="BIAB2"></set-title><set-meta name="description" content="Blockchain in a Box II (aka. Blockchain in Many Boxes)"></set-meta><set-meta name="keywords" content="subutai,cloud,ethereum,blockchain,private,private blockchain"></set-meta><img src="img/biab2-logo.gif" class="rounded float-right" alt="BIAB2 Logo"><h1>Subutai: Blockchain in a Box II</h1><p class="lead">aka. Blockchain in Many Boxes</p><p>Some month back, I was spending quite a long time experimenting with writing Solidity contracts. While the purpose of spending that time was to learn Solidity, a significant part was spend on actually getting the various tools to work together - Truffle, Ethereum Wallet, Metamask, Geth.</p><p>A result of that was that I decided to write a Subutai Blueprint - which became <a href="https://bazaar.subutai.io/products/390">Blockchain-in-a-Box</a>. This blueprint combined everything into one environment and one container which included a virtual desktop with the necessary tools included.</p><p>While pretty cool in itself, this blueprint had - and indeed have - a few issues. First of all, personally I am on a quite poor Internet connection and as a result virtual desktops are quite useless to me. Second, while the blueprint can be quite useful for learning Solidity, having everything run in a single isolated container is not really all that useful when it comes to using the resulting contracts in Dapps (decentralized application) which is quite often the ultimate purpose of developing a smart contract in the first place.</p><p>In short, <strong>Blockchain in a Box</strong> wasn't as flexible as I would have liked it, and thus <strong>Blockchain in a Box mk. II</strong> (aka. Blockchain in Many Boxes - from now on BIAB2) was born.</p><h2>Create an Ethereum Account</h2><p>Before attempting to deploy BIAB2, an ethereum account is needed. You can in principle use any existing account for which you own the private key, but for the purpose of this page, I will use <a href="https://metamask.io/">Metamask</a> to create one. Install Metamask in your favorite browser and then select "Create Account" from the menu:</p><img src="img/ca.png" class="img-fluid" alt="Create Metamask Account"><p>After creating the account, copy the account address to the clipboard.</p><img src="img/ca2.png" class="img-fluid" alt="Copy Metamask Account"><p>- in this case it is: "0x1278FCe07901AAac302f2BE36E57164Bd075fa7B".</p><h2>Deploy Blueprint</h2><p>Now that we have an ethereum wallet, we can go on and deploy BIAB2.</p><p>The BIAB2 blueprint is still at the time of writing a work in progress and because of that it has not yet been made public on Subutai. Until it is released on Subuai Bazaar, it can still be run by forking my <a href="https://github.com/lbthomsen/subutai-bp-blockchain2">Github Repository</a>. After you fork the blueprint on Github, you can find it on Bazaar under your personal menu (top-right corner) and "Github Projects". Find "subutai-bp-blockchain2" in the list and click the Build button.</p><img src="img/biab2-vars.png" class="img-fluid" alt="BIAB2 Variables"><p>Let's go through the variable settings:</p><ul><li>bootnodePort<p>This is the RPC port to which remote geth instances should connect to synchronize.</p></li><li>coinbase<p>The coinbase is the account to which mined ethereum are deposited. Paste the address you generated in the previous section.</p></li><li>ethereumNetwork<p>This is the network id of your private ethereum network. You can pretty much pick any number.</p></li><li>bootnodeDomain<p>This is the domain pointing to the single bootnode. The bootnode is used to "form" the network and all other nodes will connect to this node.</p></li><li>environmentName<p>The name of the Subutai Bazaar environment.</p></li><li>numberOfNodes<p>Number of "tracking" nodes. These nodes will not do any mining but they will make a port available for Dapps so the number should depend on the expected load.</p></li><li>blockchainDomain<p>This domain will point to the above nodes and can be used for Dapps - so http://domain:8545 can be used for web3.</p></li><li>numberOfMiners<p>These nodes will run at high load and mine ethereum on the network. They will not be accessible from the outside but will generate the blocks on the private chain.</p></li><li>ethereumDifficulty<p>Will determine how much "work" is needed to generate a block (initially?).</p></li></ul><h2>Synchronizing Local Geth</h2><blockquote>geth --networkid 2021 --datadir .ethereum/2021 --bootnodes enode://32a8b45e1ac9d3210032d1aa882e3517df4ebc091fd40f6269383ab9d3f6fab8cd091996c5908478b7982b35560a26e4da64380ae885edcccc4bc1906ba3e912@62.138.0.203:30303 --rpc --rpcaddr 0.0.0.0 --rpcport 8545 --rpcapi web3,eth,personal,net,debug,trace --rpccorsdomain="*"</blockquote><h2>TODO</h2><p>As mentioned earlier, BIAB2 is a work in progress and it still have plenty of room for improvement. Among my plans are:</p><ul><li>Built-in Blockchain Explorer</li><li>Better port mapping</li></ul>